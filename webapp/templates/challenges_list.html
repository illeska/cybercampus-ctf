{% extends "base.html" %}
{% block title %}Challenges - CyberCampus CTF{% endblock %}

{% block content %}
<section class="page-wrapper">
  <h2 class="animated-title">ğŸ“š Challenges Disponibles</h2>
  <p>Choisissez un challenge et testez vos compÃ©tences en cybersÃ©curitÃ© !</p>

  {% if challenges %}
    <div class="challenges-grid">
      {% for challenge in challenges %}
        {% set is_solved = current_user.submissions.filter_by(challenge_id=challenge.id, correct=True).first() %}
        
        <div class="challenge-card {% if is_solved %}solved{% endif %}">
          <div class="challenge-header">
            <h3>
              {{ challenge.titre }}
              {% if is_solved %}
                <span class="solved-badge">âœ…</span>
              {% endif %}
            </h3>
            <span class="challenge-points">{{ challenge.points }} pts</span>
          </div>
          
          <div class="challenge-description">
            <p>{{ challenge.description[:150] }}{% if challenge.description|length > 150 %}...{% endif %}</p>
          </div>
          
          <div class="challenge-footer">
            <a href="{{ url_for('challenge_view', challenge_id=challenge.id) }}" class="btn challenge-btn">
              {% if is_solved %}
                <span class="btn-icon">ğŸ”„</span> Revoir le challenge
              {% else %}
                <span class="btn-icon">ğŸ¯</span> AccÃ©der au challenge
              {% endif %}
            </a>
          </div>
        </div>
      {% endfor %}

      <!-- Carte "Prochainement" -->
      <div class="challenge-card coming-soon-challenge">
        <div class="coming-soon-ribbon">BientÃ´t</div>
        <div class="challenge-header">
          <h3>ğŸš€ Nouveaux challenges</h3>
        </div>
        
        <div class="challenge-description">
          <p>
            D'autres challenges sont prÃ©vus trÃ¨s prochainement ! Restez connectÃ© pour dÃ©couvrir 
            de nouveaux dÃ©fis en stÃ©ganographie, reverse engineering et bien plus encore.
          </p>
        </div>

        <div class="upcoming-topics">
          <span class="topic-badge">âš™ï¸ Reverse Engineering</span>
          <span class="topic-badge">ğŸ–¼ï¸ StÃ©ganographie</span>
          <span class="topic-badge">...</span>
        </div>
        
        <div class="challenge-footer">
          <button class="btn challenge-btn disabled" disabled>
            <span class="btn-icon">â³</span> En prÃ©paration
          </button>
        </div>
      </div>

    </div>
  {% else %}
    <div class="empty-state">
      <div class="empty-icon">ğŸš§</div>
      <h3>Aucun challenge disponible</h3>
      <p>De nouveaux challenges arrivent bientÃ´t. Revenez plus tard !</p>
    </div>
  {% endif %}
</section>
{% endblock %}